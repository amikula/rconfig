<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: RConfig</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">RConfig</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/rconfig/rconfig_rb.html">
                lib/rconfig/rconfig.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="Object.html">
                Object
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Copyright (c) 2009 Rahmal Conda &lt;rahmal@gmail.com&gt;
</p>
<hr size="10"></hr><p>
The complete solution for Ruby Configuration Management. <a
href="RConfig.html">RConfig</a> is a Ruby library that manages
configuration within Ruby applications. It bridges the gap between yaml,
xml, and key/value based properties files, by providing a centralized
solution to handle application configuration from one location. It provides
the simplicity of hash-based access, that Rubyists have come to know and
love, supporting your configuration style of choice, while providing many
new features, and an elegant API.
</p>
<hr size="10"></hr><ul>
<li>Simple, easy to install and use.

</li>
<li>Supports yaml, xml, and properties files.

</li>
<li>Yaml and xml files supprt infinite level of configuration grouping.

</li>
<li>Intuitive dot-notation &#8216;key chaining&#8217; argument access.

</li>
<li>Simple well-known hash/array based argument access.

</li>
<li>Implements multilevel caching to reduce disk access.

</li>
<li>Short-hand access to &#8216;global&#8217; application configuration, and
shell environment.

</li>
<li>Overlays multiple configuration files to support environment, host, and
even locale-specific configuration.

</li>
</ul>
<hr size="10"></hr><pre>
 The overlay order of the config files is defined by SUFFIXES:
 * nil
 * _local
 * _config
 * _local_config
 * _{environment} (.i.e _development)
 * _{environment}_local (.i.e _development_local)
 * _{hostname} (.i.e _whiskey)
 * _{hostname}_config_local (.i.e _whiskey_config_local)
</pre>
<hr size="10"></hr><p>
Example:
</p>
<pre>
 shell/console =&gt;
   export LANG=en

 demo.yml =&gt;
  server:
    address: host.domain.com
    port: 81
 ...

 application.properties =&gt;
   debug_level = verbose
 ...
</pre>
<p>
demo.rb =&gt;
</p>
<pre>
 require 'rconfig'
 RConfig.config_paths = ['$HOME/config', '#{APP_ROOT}/config', '/demo/conf']
 RConfig.demo[:server][:port] =&gt; 81
 RConfig.demo.server.address  =&gt; 'host.domain.com'

 RConfig[:debug_level] =&gt; 'verbose'
 RConfig[:lang] =&gt; 'en'
 ...
</pre>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000030">[]</a>&nbsp;&nbsp;
      <a href="#M000042">[]</a>&nbsp;&nbsp;
      <a href="#M000034">allow_reload=</a>&nbsp;&nbsp;
      <a href="#M000026">check_config_changed</a>&nbsp;&nbsp;
      <a href="#M000024">config_changed?</a>&nbsp;&nbsp;
      <a href="#M000045">config_file_loaded</a>&nbsp;&nbsp;
      <a href="#M000044">config_file_loaded=</a>&nbsp;&nbsp;
      <a href="#M000023">config_files</a>&nbsp;&nbsp;
      <a href="#M000027">config_has_changed?</a>&nbsp;&nbsp;
      <a href="#M000025">config_hash</a>&nbsp;&nbsp;
      <a href="#M000015">config_paths</a>&nbsp;&nbsp;
      <a href="#M000013">config_paths=</a>&nbsp;&nbsp;
      <a href="#M000016">config_paths_set?</a>&nbsp;&nbsp;
      <a href="#M000039">create_dottable_hash</a>&nbsp;&nbsp;
      <a href="#M000038">disable_reload</a>&nbsp;&nbsp;
      <a href="#M000048">filename_for_name</a>&nbsp;&nbsp;
      <a href="#M000046">fire_on_load</a>&nbsp;&nbsp;
      <a href="#M000047">flush_cache</a>&nbsp;&nbsp;
      <a href="#M000032">get_config_file</a>&nbsp;&nbsp;
      <a href="#M000022">get_config_files</a>&nbsp;&nbsp;
      <a href="#M000012">initialize</a>&nbsp;&nbsp;
      <a href="#M000020">load_config_files</a>&nbsp;&nbsp;
      <a href="#M000029">make_indifferent</a>&nbsp;&nbsp;
      <a href="#M000028">merge_hashes</a>&nbsp;&nbsp;
      <a href="#M000040">method_missing</a>&nbsp;&nbsp;
      <a href="#M000041">method_missing</a>&nbsp;&nbsp;
      <a href="#M000033">on_load</a>&nbsp;&nbsp;
      <a href="#M000017">overlay</a>&nbsp;&nbsp;
      <a href="#M000018">overlay=</a>&nbsp;&nbsp;
      <a href="#M000021">parse_file</a>&nbsp;&nbsp;
      <a href="#M000037">reload</a>&nbsp;&nbsp;
      <a href="#M000035">reload?</a>&nbsp;&nbsp;
      <a href="#M000036">reload_interval=</a>&nbsp;&nbsp;
      <a href="#M000014">set_config_path</a>&nbsp;&nbsp;
      <a href="#M000019">suffixes</a>&nbsp;&nbsp;
      <a href="#M000043">verbose=</a>&nbsp;&nbsp;
      <a href="#M000049">verbose_log</a>&nbsp;&nbsp;
      <a href="#M000031">with_file</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name">Singleton</span>
        <span class="include-name"><a href="Constants.html">Constants</a></span>
        <span class="include-name"><a href="ClassVariables.html">ClassVariables</a></span>
      </div>
    </div>

    <div id="section">



    <div id="aliases-list">
      <h3 class="section-bar">External Aliases</h3>

      <div class="name-list">
                        <table summary="aliases">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">config_paths=</td>
          <td>-&gt;</td>
          <td class="context-item-value">set_config_paths</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">set_config_path</td>
          <td>-&gt;</td>
          <td class="context-item-value">add_config_path</td>
        </tr>
                        </table>
      </div>
    </div>


      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000030" class="method-detail">
        <a name="M000030"></a>

        <div class="method-heading">
          <a href="#M000030" class="method-signature">
          <span class="method-name">[]</span><span class="method-args">(key, file=:application)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method provides shorthand to retrieve confiuration data that is global
in scope, and used on an application or environment-wide level. The default
location that it checks is the application file. The application config
file is a special config file that should be used for config data that is
broad in scope and used throughout the application. Since <a
href="RConfig.html">RConfig</a> gives special regard to the application
config file, thought should be given to whatever config information is
placed there.
</p>
<p>
Most config data will be specific to particular part of the application
(i.e. database, web service), and should therefore be placed in its own
specific config file, such as database.yml, or services.xml
</p>
<p>
This method also acts as a wrapper for ENV. If no value is returned from
the application config, it will also check ENV for a value matching the
specified key.
</p>
<p>
Ex.1 <a href="RConfig.html">RConfig</a>[:test_mode] =&gt;
</p>
<pre>
       RConfig.application[:test_mode] ||
       RConfig.application.test_mode
</pre>
<p>
Ex.2 <a href="RConfig.html">RConfig</a>[:web_app_root] =&gt;
ENV[&#8216;WEB_APP_ROOT&#8217;]
</p>
<p>
NOTE: The application config file can be in any of
</p>
<pre>
      the supported formats (yml, xml, conf, etc.)
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000030-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000030-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 539</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-operator">[]</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">file</span>=<span class="ruby-identifier">:application</span>)
    <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">get_config_file</span>(<span class="ruby-identifier">file</span>)[<span class="ruby-identifier">key</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">ENV</span>[<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">upcase</span>]
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000034" class="method-detail">
        <a name="M000034"></a>

        <div class="method-heading">
          <a href="#M000034" class="method-signature">
          <span class="method-name">allow_reload=</span><span class="method-args">(reload)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the flag indicating whether or not <a
href="RConfig.html#M000037">reload</a> should be executed.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000034-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000034-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 619</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">allow_reload=</span>(<span class="ruby-identifier">reload</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'Argument must be true or false.'</span> <span class="ruby-keyword kw">unless</span> [<span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">reload</span>)
    <span class="ruby-ivar">@@reload_disabled</span> = (<span class="ruby-keyword kw">not</span> <span class="ruby-identifier">reload</span>)
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000026" class="method-detail">
        <a name="M000026"></a>

        <div class="method-heading">
          <a href="#M000026" class="method-signature">
          <span class="method-name">check_config_changed</span><span class="method-args">(name = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
If config files have changed, Caches are flushed, <a
href="RConfig.html#M000033">on_load</a> triggers are run.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000026-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000026-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 432</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">check_config_changed</span>(<span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
    <span class="ruby-identifier">changed</span> = []
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
      <span class="ruby-ivar">@@cache_hash</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">|</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">config_has_changed?</span>(<span class="ruby-identifier">name</span>)
          <span class="ruby-identifier">changed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment cmt">#  if name.is_a?(Symbol)</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">config_has_changed?</span>(<span class="ruby-identifier">name</span>)
        <span class="ruby-identifier">changed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>

    <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;check_config_changed(#{name.inspect}) =&gt; #{changed.inspect}&quot;</span> 

    <span class="ruby-identifier">changed</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">changed</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000024" class="method-detail">
        <a name="M000024"></a>

        <div class="method-heading">
          <a href="#M000024" class="method-signature">
          <span class="method-name">config_changed?</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns whether or not the config for the given config name has changed
since it was last loaded.
</p>
<p>
Returns true if any files for config have changes since last load.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000024-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000024-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 399</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config_changed?</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;config_changed?(#{name.inspect})&quot;</span> 
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment cmt"># if name.is_a?(Symbol)</span>
    <span class="ruby-operator">!</span> (<span class="ruby-ivar">@@cache_files</span>[<span class="ruby-identifier">name</span>] <span class="ruby-operator">===</span> <span class="ruby-identifier">get_config_files</span>(<span class="ruby-identifier">name</span>))
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000045" class="method-detail">
        <a name="M000045"></a>

        <div class="method-heading">
          <a href="#M000045" class="method-signature">
          <span class="method-name">config_file_loaded</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Helper method for white-box testing and debugging. Returns a hash of each
file that has been loaded.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000045-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000045-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 752</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config_file_loaded</span>
    <span class="ruby-ivar">@@config_file_loaded</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000044" class="method-detail">
        <a name="M000044"></a>

        <div class="method-heading">
          <a href="#M000044" class="method-signature">
          <span class="method-name">config_file_loaded=</span><span class="method-args">(x)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Helper method for white-box testing and debugging. Sets a hash of each file
that has been loaded.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000044-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000044-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 744</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config_file_loaded=</span>(<span class="ruby-identifier">x</span>)
    <span class="ruby-ivar">@@config_file_loaded</span> = <span class="ruby-identifier">x</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000023" class="method-detail">
        <a name="M000023"></a>

        <div class="method-heading">
          <a href="#M000023" class="method-signature">
          <span class="method-name">config_files</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return the config file information for the given config name.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000023-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000023-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 388</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config_files</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-ivar">@@cache_files</span>[<span class="ruby-identifier">name</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">get_config_files</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000027" class="method-detail">
        <a name="M000027"></a>

        <div class="method-heading">
          <a href="#M000027" class="method-signature">
          <span class="method-name">config_has_changed?</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000027-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000027-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 453</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config_has_changed?</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;config_has_changed?(#{name.inspect}), reload_disabled=#{@@reload_disabled}&quot;</span> 

    <span class="ruby-identifier">changed</span> = <span class="ruby-keyword kw">false</span>

    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">config_changed?</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">reload?</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@@cache_hash</span>[<span class="ruby-identifier">name</span>]
        <span class="ruby-ivar">@@cache_hash</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-keyword kw">nil</span>

        <span class="ruby-comment cmt"># force on_load triggers.</span>
        <span class="ruby-identifier">fire_on_load</span>(<span class="ruby-identifier">name</span>)
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-identifier">changed</span> = <span class="ruby-keyword kw">true</span>
    <span class="ruby-keyword kw">end</span>

    <span class="ruby-identifier">changed</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000025" class="method-detail">
        <a name="M000025"></a>

        <div class="method-heading">
          <a href="#M000025" class="method-signature">
          <span class="method-name">config_hash</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Get the merged config hash for the named file. Returns a cached indifferent
access faker hash merged from all config files for a name.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000025-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000025-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 411</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config_hash</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;config_hash(#{name.inspect})&quot;</span>

    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@@cache_hash</span>[<span class="ruby-identifier">name</span>]
      <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@@cache_hash</span>[<span class="ruby-identifier">name</span>] = 
        <span class="ruby-identifier">make_indifferent</span>(
          <span class="ruby-identifier">merge_hashes</span>(
            <span class="ruby-identifier">load_config_files</span>(<span class="ruby-identifier">name</span>)
          )
        )
      <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;config_hash(#{name.inspect}): reloaded&quot;</span> 
    <span class="ruby-keyword kw">end</span>

    <span class="ruby-identifier">result</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000015" class="method-detail">
        <a name="M000015"></a>

        <div class="method-heading">
          <a href="#M000015" class="method-signature">
          <span class="method-name">config_paths</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of directories to search for configuration files.
</p>
<p>
Can be preset with <a href="RConfig.html#M000013">config_paths=</a>/<a
href="RConfig.html#M000014">set_config_path</a>, controlled via
ENV[&#8216;CONFIG_PATH&#8217;], or defaulted to CONFIG_ROOT (assumming some
sort of application initiation as in RAILS). Defaults to [ CONFIG_ROOT ].
</p>
<p>
Examples:
</p>
<pre>
  export CONFIG_PATH=&quot;$HOME/work/config:CONFIG_ROOT&quot;
  CONFIG_ROOT = RAILS_ROOT + &quot;/config&quot; unless defined? CONFIG_ROOT
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000015-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000015-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 158</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config_paths</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@@config_paths</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@@config_paths</span>.<span class="ruby-identifier">blank?</span>

    <span class="ruby-keyword kw">begin</span>
      <span class="ruby-identifier">config_paths</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'CONFIG_PATH'</span>]
    <span class="ruby-keyword kw">rescue</span>
      <span class="ruby-identifier">verbose_log</span> <span class="ruby-value str">&quot;Forget something? No config paths! ENV['CONFIG_PATH'] is not set.&quot;</span>,
                  <span class="ruby-value str">&quot;Hint:  Use config_paths= or set_config_path.&quot;</span>
    <span class="ruby-keyword kw">end</span>

    <span class="ruby-keyword kw">begin</span>
      <span class="ruby-identifier">config_paths</span> = [<span class="ruby-constant">CONFIG_ROOT</span>] 
    <span class="ruby-keyword kw">rescue</span>
      <span class="ruby-identifier">verbose_log</span> <span class="ruby-value str">&quot;Forget something?  No config paths! CONFIG_ROOT is not set.&quot;</span>,
                  <span class="ruby-value str">&quot;Hint:  Use config_paths= or set_config_path.&quot;</span>
    <span class="ruby-keyword kw">end</span>

    <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@@config_paths</span>.<span class="ruby-identifier">blank?</span>
       <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidConfigPathError</span>,
             <span class="ruby-value str">&quot;Forget something?  No config paths!\n&quot;</span> <span class="ruby-operator">+</span>
             <span class="ruby-value str">&quot;Niether ENV['CONFIG_PATH'] or CONFIG_ROOT is set.\n&quot;</span> <span class="ruby-operator">+</span>
             <span class="ruby-value str">&quot;Hint:  Use config_paths= or set_config_path.&quot;</span>
    <span class="ruby-keyword kw">end</span>

    <span class="ruby-ivar">@@config_paths</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000013" class="method-detail">
        <a name="M000013"></a>

        <div class="method-heading">
          <a href="#M000013" class="method-signature">
          <span class="method-name">config_paths=</span><span class="method-args">(paths)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the list of directories to search for configuration files. The
argument must be an array of strings representing the paths to the
directories, or a string representing either a single path or a list of
paths separated by either a colon (:) or a semi-colon (;). If <a
href="RConfig.html#M000037">reload</a> is disabled, it can only be set
once.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000013-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000013-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 95</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config_paths=</span>(<span class="ruby-identifier">paths</span>)
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@@reload_disabled</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">config_paths_set?</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
      <span class="ruby-identifier">path_sep</span> = (<span class="ruby-identifier">paths</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/;/</span>) <span class="ruby-operator">?</span> <span class="ruby-value str">';'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">':'</span>
      <span class="ruby-identifier">paths</span> = <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">split</span>(<span class="ruby-node">/#{path_sep}+/</span>)
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Array</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, 
            <span class="ruby-node">&quot;Path(s) must be a String or an Array [#{paths.inspect}]&quot;</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, 
            <span class="ruby-node">&quot;Must provide at least one paths: [#{paths.inspect}]&quot;</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">all?</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">dir</span> = <span class="ruby-constant">CONFIG_ROOT</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dir</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'CONFIG_ROOT'</span>
      <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">dir</span>)
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidConfigPathError</span>, 
              <span class="ruby-node">&quot;This directory is invalid: [#{dir.inspect}]&quot;</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">reload</span>
    <span class="ruby-ivar">@@config_paths</span> = <span class="ruby-identifier">paths</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000016" class="method-detail">
        <a name="M000016"></a>

        <div class="method-heading">
          <a href="#M000016" class="method-signature">
          <span class="method-name">config_paths_set?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Indicates whether or not <a href="RConfig.html#M000015">config_paths</a>
have been set. Returns true if @@<a
href="RConfig.html#M000015">config_paths</a> has at least one directory.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000016-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000016-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 189</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config_paths_set?</span>
    <span class="ruby-operator">!</span><span class="ruby-ivar">@@config_paths</span>.<span class="ruby-identifier">blank?</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000039" class="method-detail">
        <a name="M000039"></a>

        <div class="method-heading">
          <a href="#M000039" class="method-signature">
          <span class="method-name">create_dottable_hash</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a dottable hash for all <a href="Hash.html">Hash</a> objects,
recursively.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000039-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000039-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 677</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">create_dottable_hash</span>(<span class="ruby-identifier">value</span>)
    <span class="ruby-identifier">make_indifferent</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000038" class="method-detail">
        <a name="M000038"></a>

        <div class="method-heading">
          <a href="#M000038" class="method-signature">
          <span class="method-name">disable_reload</span><span class="method-args">() {|| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Disables any reloading of config, executes &amp;block, calls <a
href="RConfig.html#M000026">check_config_changed</a>, returns result of
block
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000038-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000038-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 660</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">disable_reload</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
    <span class="ruby-comment cmt"># This should increment @@reload_disabled on entry, decrement on exit.</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">nil</span>
    <span class="ruby-identifier">reload_disabled_save</span> = <span class="ruby-ivar">@@reload_disabled</span>
    <span class="ruby-keyword kw">begin</span>
      <span class="ruby-ivar">@@reload_disabled</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">yield</span>
    <span class="ruby-keyword kw">ensure</span>
      <span class="ruby-ivar">@@reload_disabled</span> = <span class="ruby-identifier">reload_disabled_save</span>
      <span class="ruby-identifier">check_config_changed</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@@reload_disabled</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">result</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000032" class="method-detail">
        <a name="M000032"></a>

        <div class="method-heading">
          <a href="#M000032" class="method-signature">
          <span class="method-name">get_config_file</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Get the merged config hash. Will auto check every 5 minutes, for longer
running apps.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000032-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000032-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 568</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">get_config_file</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> 
    <span class="ruby-identifier">now</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>

    <span class="ruby-keyword kw">if</span> (<span class="ruby-operator">!</span> <span class="ruby-ivar">@@last_auto_check</span>[<span class="ruby-identifier">name</span>]) <span class="ruby-operator">||</span> (<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@@last_auto_check</span>[<span class="ruby-identifier">name</span>]) <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@reload_interval</span>
      <span class="ruby-ivar">@@last_auto_check</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">now</span>
      <span class="ruby-identifier">check_config_changed</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-keyword kw">end</span>

    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">config_hash</span>(<span class="ruby-identifier">name</span>)

    <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;get_config_file(#{name.inspect}) =&gt; #{result.inspect}&quot;</span>

    <span class="ruby-identifier">result</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000022" class="method-detail">
        <a name="M000022"></a>

        <div class="method-heading">
          <a href="#M000022" class="method-signature">
          <span class="method-name">get_config_files</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of all relevant config files as specified by _suffixes list.
Each element is an Array, containing:
</p>
<pre>
  [ &quot;the-top-level-config-name&quot;,
    &quot;the-suffixed-config-name&quot;,
    &quot;/the/absolute/path/to/yaml.yml&quot;,
    # The mtime of the yml file or nil, if it doesn't exist.
  ]
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000022-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000022-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 363</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">get_config_files</span>(<span class="ruby-identifier">name</span>) 
    <span class="ruby-identifier">files</span> = []

    <span class="ruby-identifier">config_paths</span>.<span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">dir</span> <span class="ruby-operator">|</span>
      <span class="ruby-comment cmt"># splatting *suffix allows us to deal with multipart suffixes </span>
      <span class="ruby-identifier">name_no_overlay</span>, <span class="ruby-identifier">suffixes</span> = <span class="ruby-identifier">suffixes</span>(<span class="ruby-identifier">name</span>)
      <span class="ruby-identifier">suffixes</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span> <span class="ruby-identifier">suffix</span> <span class="ruby-operator">|</span> [ <span class="ruby-identifier">name_no_overlay</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">suffix</span> ].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'_'</span>) }.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">name_x</span> <span class="ruby-operator">|</span>
        <span class="ruby-constant">CONFIG_FILE_TYPES</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>    
          <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">filename_for_name</span>(<span class="ruby-identifier">name_x</span>, <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">ext</span>)
          <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">filename</span>)
            <span class="ruby-identifier">files</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-identifier">name</span>, <span class="ruby-identifier">name_x</span>, <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">ext</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">filename</span>).<span class="ruby-identifier">mtime</span> ]
          <span class="ruby-keyword kw">end</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>

    <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;get_config_files(#{name}) =&gt; #{files.select{|x| x[3]}.inspect}&quot;</span> 

    <span class="ruby-identifier">files</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000012" class="method-detail">
        <a name="M000012"></a>

        <div class="method-heading">
          <a href="#M000012" class="method-signature">
          <span class="method-name">initialize</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Convenience method to <a href="RConfig.html#M000012">initialize</a>
necessary fields including, config paths, <a
href="RConfig.html#M000017">overlay</a>, reload_disabled, and verbose, all
at one time.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000012-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000012-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 69</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
    <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>]
    <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>
      <span class="ruby-identifier">params</span>  = <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">symbolize_keys</span>
      <span class="ruby-identifier">paths</span>   = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:paths</span>]
      <span class="ruby-identifier">overlay</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:overlay</span>]
      <span class="ruby-identifier">reload</span>  = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:reload</span>]
      <span class="ruby-identifier">verbose</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:verbose</span>]
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">paths</span>, <span class="ruby-identifier">overlay</span>, <span class="ruby-identifier">reload</span>, <span class="ruby-identifier">verbose</span> = <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config_paths</span> = <span class="ruby-identifier">paths</span>
    <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">overlay</span>      = <span class="ruby-identifier">overlay</span>
    <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">allow_reload</span> = <span class="ruby-identifier">reload</span>
    <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">verbose</span>      = <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000020" class="method-detail">
        <a name="M000020"></a>

        <div class="method-heading">
          <a href="#M000020" class="method-signature">
          <span class="method-name">load_config_files</span><span class="method-args">(name, force=false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Get each config file&#8216;s yaml hash for the given config name, to be
merged later. Files will only be loaded if they have not been loaded before
or the files have changed within the last five minutes, or force is
explicitly set to true.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000020-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000020-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 263</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">load_config_files</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">force</span>=<span class="ruby-keyword kw">false</span>)
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment cmt"># if name.is_a?(Symbol)</span>

    <span class="ruby-comment cmt"># Return last config file hash list loaded,</span>
    <span class="ruby-comment cmt"># if reload is disabled and files have already been loaded.</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@@cache_config_files</span>[<span class="ruby-identifier">name</span>] <span class="ruby-keyword kw">if</span> 
      <span class="ruby-ivar">@@reload_disabled</span> <span class="ruby-operator">&amp;&amp;</span> 
      <span class="ruby-ivar">@@cache_config_files</span>[<span class="ruby-identifier">name</span>]

    <span class="ruby-identifier">now</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>

    <span class="ruby-comment cmt"># Get array of all the existing files file the config name.</span>
    <span class="ruby-identifier">config_files</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">get_config_files</span>(<span class="ruby-identifier">name</span>)

    <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;load_config_files(#{name.inspect})&quot;</span> 
    
    <span class="ruby-comment cmt"># Get all the data from all yaml files into as hashes</span>
    <span class="ruby-identifier">hashes</span> = <span class="ruby-identifier">config_files</span>.<span class="ruby-identifier">collect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">name</span>, <span class="ruby-identifier">name_x</span>, <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">ext</span>, <span class="ruby-identifier">mtime</span> = <span class="ruby-operator">*</span><span class="ruby-identifier">f</span>

      <span class="ruby-comment cmt"># Get the cached file info the specific file, if </span>
      <span class="ruby-comment cmt"># it's been loaded before.</span>
      <span class="ruby-identifier">val</span>, <span class="ruby-identifier">last_mtime</span>, <span class="ruby-identifier">last_loaded</span> = <span class="ruby-ivar">@@cache</span>[<span class="ruby-identifier">filename</span>] 

      <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;f = #{f.inspect}&quot;</span>,
        <span class="ruby-node">&quot;cache #{name_x} filename = #{filename.inspect}&quot;</span>,
        <span class="ruby-node">&quot;cache #{name_x} val = #{val.inspect}&quot;</span>,
        <span class="ruby-node">&quot;cache #{name_x} last_mtime = #{last_mtime.inspect}&quot;</span>,
        <span class="ruby-node">&quot;cache #{name_x} last_loaded = #{last_loaded.inspect}&quot;</span>

      <span class="ruby-comment cmt"># Load the file if its never been loaded or its been more than</span>
      <span class="ruby-comment cmt"># so many minutes since last load attempt. (default: 5 minutes) </span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">last_loaded</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@reload_interval</span>)
        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">force</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">mtime</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">last_mtime</span>

          <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;mtime #{name.inspect} #{filename.inspect} &quot;</span> <span class="ruby-operator">+</span> 
                      <span class="ruby-node">&quot;changed #{mtime != last_mtime} : #{mtime.inspect} #{last_mtime.inspect}&quot;</span>
          
          <span class="ruby-comment cmt"># Get contents from config file</span>
          <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;RConfig: loading #{filename.inspect}&quot;</span> 
            <span class="ruby-identifier">val</span> = <span class="ruby-identifier">parse_file</span>(<span class="ruby-identifier">f</span>, <span class="ruby-identifier">ext</span>)              
            <span class="ruby-identifier">val</span> = <span class="ruby-identifier">val</span>[<span class="ruby-identifier">name</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ext</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:xml</span> <span class="ruby-comment cmt"># xml document must have root tag matching the file name.</span>
            <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;RConfig: loaded #{filename.inspect} =&gt; #{val.inspect}&quot;</span> 
            (<span class="ruby-ivar">@@config_file_loaded</span> <span class="ruby-operator">||=</span> { })[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">config_files</span>
          <span class="ruby-keyword kw">end</span>
            
          <span class="ruby-comment cmt"># Save cached config file contents, and mtime.</span>
          <span class="ruby-ivar">@@cache</span>[<span class="ruby-identifier">filename</span>] = [ <span class="ruby-identifier">val</span>, <span class="ruby-identifier">mtime</span>, <span class="ruby-identifier">now</span> ]
          <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;cache[#{filename.inspect}] = #{@@cache[filename].inspect}&quot;</span> 

          <span class="ruby-comment cmt"># Flush merged hash cache.</span>
          <span class="ruby-ivar">@@cache_hash</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-keyword kw">nil</span>
                 
          <span class="ruby-comment cmt"># Config files changed or disappeared.</span>
          <span class="ruby-ivar">@@cache_files</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">config_files</span>

        <span class="ruby-keyword kw">end</span> <span class="ruby-comment cmt"># if val == nil || (now - last_loaded &gt; @@reload_interval)</span>
      <span class="ruby-keyword kw">end</span>   <span class="ruby-comment cmt"># if force || val == nil || mtime != last_mtime</span>

      <span class="ruby-identifier">val</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">hashes</span>.<span class="ruby-identifier">compact!</span>

    <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;load_config_files(#{name.inspect}) =&gt; #{hashes.inspect}&quot;</span>

    <span class="ruby-comment cmt"># Keep last loaded config files around in case @@reload_dsabled.</span>
    <span class="ruby-ivar">@@cache_config_files</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">hashes</span> <span class="ruby-comment cmt">#unless hashes.empty?</span>

    <span class="ruby-identifier">hashes</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000029" class="method-detail">
        <a name="M000029"></a>

        <div class="method-heading">
          <a href="#M000029" class="method-signature">
          <span class="method-name">make_indifferent</span><span class="method-args">(x)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Recursively makes hashes into frozen IndifferentAccess ConfigFakerHash
Arrays are also traversed and frozen.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000029-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000029-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 485</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">make_indifferent</span>(<span class="ruby-identifier">x</span>)
    <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">x</span>
    <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>
      <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">frozen?</span>
        <span class="ruby-identifier">x</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span> <span class="ruby-operator">|</span>
          <span class="ruby-identifier">x</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">make_indifferent</span>(<span class="ruby-identifier">v</span>)
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">x</span> = <span class="ruby-constant">ConfigHash</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">x</span>).<span class="ruby-identifier">freeze</span>
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;make_indefferent: x = #{x.inspect}:#{x.class}&quot;</span>
    <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>
      <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">frozen?</span>
        <span class="ruby-identifier">x</span>.<span class="ruby-identifier">collect!</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">|</span>
          <span class="ruby-identifier">make_indifferent</span>(<span class="ruby-identifier">v</span>)
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">x</span>.<span class="ruby-identifier">freeze</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-comment cmt"># Freeze Strings.</span>
    <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
      <span class="ruby-identifier">x</span>.<span class="ruby-identifier">freeze</span>
    <span class="ruby-keyword kw">end</span>

    <span class="ruby-identifier">x</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000028" class="method-detail">
        <a name="M000028"></a>

        <div class="method-heading">
          <a href="#M000028" class="method-signature">
          <span class="method-name">merge_hashes</span><span class="method-args">(hashes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a merge of hashes.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000028-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000028-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 476</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">merge_hashes</span>(<span class="ruby-identifier">hashes</span>)
    <span class="ruby-identifier">hashes</span>.<span class="ruby-identifier">inject</span>({ }) { <span class="ruby-operator">|</span> <span class="ruby-identifier">n</span>, <span class="ruby-identifier">h</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">weave</span>(<span class="ruby-identifier">h</span>, <span class="ruby-keyword kw">true</span>) }
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000040" class="method-detail">
        <a name="M000040"></a>

        <div class="method-heading">
          <a href="#M000040" class="method-signature">
          <span class="method-name">method_missing</span><span class="method-args">(method, *args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Short-hand access to config file by its name.
</p>
<p>
Example:
</p>
<pre>
  RConfig.provider(:foo) =&gt; RConfig.with_file(:provider).foo
  RConfig.provider.foo   =&gt; RConfig.with_file(:provider).foo
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000040-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000040-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 690</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">with_file</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
    <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;#{self}.method_missing(#{method.inspect}, #{args.inspect}) =&gt; #{value.inspect}&quot;</span>
    <span class="ruby-identifier">value</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000033" class="method-detail">
        <a name="M000033"></a>

        <div class="method-heading">
          <a href="#M000033" class="method-signature">
          <span class="method-name">on_load</span><span class="method-args">(*args, &amp;blk)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Register a callback when a config has been reloaded. If no config name is
specified, the callback will be registered under the name :ANY. The name
:ANY will register a callback for any config file change.
</p>
<p>
Example:
</p>
<pre>
  class MyClass
    @@my_config = { }
    RConfig.on_load(:cache) do
      @@my_config = { }
    end
    def my_config
      @@my_config ||= something_expensive_thing_on_config(RConfig.cache.memory_limit)
    end
  end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000033-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000033-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 602</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">on_load</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">blk</span>)
    <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:ANY</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">proc</span> = <span class="ruby-identifier">blk</span>.<span class="ruby-identifier">to_proc</span>

    <span class="ruby-comment cmt"># Call proc on registration.</span>
    <span class="ruby-identifier">proc</span>.<span class="ruby-identifier">call</span>()

    <span class="ruby-comment cmt"># Register callback proc.</span>
    <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">|</span>
      <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>
      (<span class="ruby-ivar">@@on_load</span>[<span class="ruby-identifier">name</span>] <span class="ruby-operator">||=</span> [ ]) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">proc</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000017" class="method-detail">
        <a name="M000017"></a>

        <div class="method-heading">
          <a href="#M000017" class="method-signature">
          <span class="method-name">overlay</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Specifies an additional <a href="RConfig.html#M000017">overlay</a> suffix.
</p>
<p>
E.g. &#8216;gb&#8217; for UK locale.
</p>
<p>
Defaults from ENV[&#8216;CONFIG_OVERLAY&#8217;].
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000017-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000017-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 199</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">overlay</span>
    <span class="ruby-ivar">@@overlay</span> <span class="ruby-operator">||=</span> (<span class="ruby-identifier">x</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'CONFIG_OVERLAY'</span>]) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">freeze</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000018" class="method-detail">
        <a name="M000018"></a>

        <div class="method-heading">
          <a href="#M000018" class="method-signature">
          <span class="method-name">overlay=</span><span class="method-args">(x)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets <a href="RConfig.html#M000017">overlay</a> for
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000018-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000018-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 206</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">overlay=</span>(<span class="ruby-identifier">x</span>)
    <span class="ruby-identifier">flush_cache</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@@overlay</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">x</span>
    <span class="ruby-ivar">@@overlay</span> = <span class="ruby-identifier">x</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">freeze</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000021" class="method-detail">
        <a name="M000021"></a>

        <div class="method-heading">
          <a href="#M000021" class="method-signature">
          <span class="method-name">parse_file</span><span class="method-args">(conf_file, ext)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Parses file based on file type.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000021-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000021-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 339</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse_file</span>(<span class="ruby-identifier">conf_file</span>, <span class="ruby-identifier">ext</span>)
    <span class="ruby-identifier">hash</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ext</span>
    <span class="ruby-keyword kw">when</span> <span class="ruby-operator">*</span><span class="ruby-constant">YML_FILE_TYPES</span>
      <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">load</span>(<span class="ruby-identifier">conf_file</span>)
    <span class="ruby-keyword kw">when</span> <span class="ruby-operator">*</span><span class="ruby-constant">XML_FILE_TYPES</span>
      <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">from_xml</span>(<span class="ruby-identifier">conf_file</span>)
    <span class="ruby-keyword kw">when</span> <span class="ruby-operator">*</span><span class="ruby-constant">CNF_FILE_TYPES</span>
      <span class="ruby-constant">PropertiesFileParser</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">conf_file</span>)
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ConfigError</span>, <span class="ruby-node">&quot;Unknown File type:#{ext}&quot;</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">freeze</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000037" class="method-detail">
        <a name="M000037"></a>

        <div class="method-heading">
          <a href="#M000037" class="method-signature">
          <span class="method-name">reload</span><span class="method-args">(force = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Flushes cached config data, so that it can be reloaded from disk. It is
recommended that this should be used with caution, and any need to <a
href="RConfig.html#M000037">reload</a> in a production setting should
minimized or completely avoided if possible.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000037-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000037-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 646</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reload</span>(<span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'Argument must be true or false.'</span> <span class="ruby-keyword kw">unless</span> [<span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">force</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">force</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">reload?</span>
      <span class="ruby-identifier">flush_cache</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">nil</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000035" class="method-detail">
        <a name="M000035"></a>

        <div class="method-heading">
          <a href="#M000035" class="method-signature">
          <span class="method-name">reload?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Flag indicating whether or not <a href="RConfig.html#M000037">reload</a>
should be executed.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000035-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000035-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 627</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reload?</span>
    <span class="ruby-operator">!</span><span class="ruby-ivar">@@reload_disabled</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000036" class="method-detail">
        <a name="M000036"></a>

        <div class="method-heading">
          <a href="#M000036" class="method-signature">
          <span class="method-name">reload_interval=</span><span class="method-args">(x)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the number of seconds between reloading of config files and automatic
<a href="RConfig.html#M000037">reload</a> checks. Defaults to 5 minutes.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000036-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000036-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 635</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reload_interval=</span>(<span class="ruby-identifier">x</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'Argument must be Integer.'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Integer</span>)
    <span class="ruby-ivar">@@reload_interval</span> = (<span class="ruby-identifier">x</span> <span class="ruby-operator">||</span> <span class="ruby-value">300</span>)
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000014" class="method-detail">
        <a name="M000014"></a>

        <div class="method-heading">
          <a href="#M000014" class="method-signature">
          <span class="method-name">set_config_path</span><span class="method-args">(path)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Adds the specified path to the list of directories to search for
configuration files. It only allows one path to be entered at a time. If <a
href="RConfig.html#M000037">reload</a> is disabled, it can onle be set
once.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000014-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000014-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 127</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">set_config_path</span> <span class="ruby-identifier">path</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@@reload_disabled</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">config_paths_set?</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)      <span class="ruby-comment cmt"># only allow string argument</span>
    <span class="ruby-identifier">path_sep</span> = (<span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/;/</span>) <span class="ruby-operator">?</span> <span class="ruby-value str">';'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">':'</span>  <span class="ruby-comment cmt"># if string contains multiple paths</span>
    <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-node">/#{path_sep}+/</span>)[<span class="ruby-value">0</span>]  <span class="ruby-comment cmt"># only accept first one.    </span>

    <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@@config_paths</span>.<span class="ruby-identifier">blank?</span> 
      <span class="ruby-identifier">set_config_paths</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-keyword kw">else</span> 
      <span class="ruby-identifier">config_paths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-identifier">reload</span>
      <span class="ruby-ivar">@@config_paths</span>
    <span class="ruby-keyword kw">end</span>    
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000019" class="method-detail">
        <a name="M000019"></a>

        <div class="method-heading">
          <a href="#M000019" class="method-signature">
          <span class="method-name">suffixes</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of <a href="RConfig.html#M000019">suffixes</a> to try for a
given config name.
</p>
<p>
A config name with an explicit <a href="RConfig.html#M000017">overlay</a>
(e.g.: &#8216;name_GB&#8217;) overrides any current _overlay.
</p>
<p>
This allows code to specifically ask for config overlays for a particular
locale.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000019-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000019-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 221</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">suffixes</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-ivar">@@suffixes</span>[<span class="ruby-identifier">name</span>] <span class="ruby-operator">||=</span>
        <span class="ruby-keyword kw">begin</span>
          <span class="ruby-identifier">ol</span> = <span class="ruby-identifier">overlay</span>
          <span class="ruby-identifier">name_x</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">dup</span>
          <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name_x</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/_([A-Z]+)$/</span>, <span class="ruby-value str">''</span>)
            <span class="ruby-identifier">ol</span> = <span class="ruby-identifier">$1</span>
          <span class="ruby-keyword kw">end</span>
          <span class="ruby-identifier">name_x</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ol</span>
            <span class="ruby-identifier">ol_</span> = <span class="ruby-identifier">ol</span>.<span class="ruby-identifier">upcase</span>
            <span class="ruby-identifier">ol</span> = <span class="ruby-identifier">ol</span>.<span class="ruby-identifier">downcase</span>
            <span class="ruby-identifier">x</span> = [ ]
            <span class="ruby-constant">SUFFIXES</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">suffix</span> <span class="ruby-operator">|</span>
              <span class="ruby-comment cmt"># Standard, no overlay:</span>
              <span class="ruby-comment cmt"># e.g.: database_&lt;suffix&gt;.yml</span>
              <span class="ruby-identifier">x</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">suffix</span>

              <span class="ruby-comment cmt"># Overlay:</span>
              <span class="ruby-comment cmt"># e.g.: database_(US|GB)_&lt;suffix&gt;.yml</span>
              <span class="ruby-identifier">x</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-identifier">ol_</span>, <span class="ruby-identifier">suffix</span> ]
            <span class="ruby-keyword kw">end</span>
            [ <span class="ruby-identifier">name_x</span>, <span class="ruby-identifier">x</span>.<span class="ruby-identifier">freeze</span> ]
          <span class="ruby-keyword kw">else</span>
            [ <span class="ruby-identifier">name</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-constant">SUFFIXES</span>.<span class="ruby-identifier">freeze</span> ]
          <span class="ruby-keyword kw">end</span>
          <span class="ruby-identifier">result</span>.<span class="ruby-identifier">freeze</span>

          <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;suffixes(#{name}) =&gt; #{result.inspect}&quot;</span>

          <span class="ruby-identifier">result</span>
        <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000043" class="method-detail">
        <a name="M000043"></a>

        <div class="method-heading">
          <a href="#M000043" class="method-signature">
          <span class="method-name">verbose=</span><span class="method-args">(x)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Helper method for white-box testing and debugging. Sets the flag indicating
whether or not to log errors and application run-time information.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000043-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000043-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 736</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">verbose=</span>(<span class="ruby-identifier">x</span>)
    <span class="ruby-ivar">@@verbose</span> = <span class="ruby-identifier">x</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">false</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">x</span>;
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000031" class="method-detail">
        <a name="M000031"></a>

        <div class="method-heading">
          <a href="#M000031" class="method-signature">
          <span class="method-name">with_file</span><span class="method-args">(name, *args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Get the value specified by the args, in the file specified by th name
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000031-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000031-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 547</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">with_file</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
    <span class="ruby-comment cmt"># verbose_log &quot;with_file(#{name.inspect}, #{args.inspect})&quot;; result = </span>
    <span class="ruby-identifier">args</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-identifier">get_config_file</span>(<span class="ruby-identifier">name</span>)) { <span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>, <span class="ruby-identifier">i</span> <span class="ruby-operator">|</span> 
      <span class="ruby-comment cmt"># verbose_log &quot;v = #{v.inspect}, i = #{i.inspect}&quot;</span>
      <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">v</span>
      <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>
        <span class="ruby-identifier">v</span>[<span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_s</span>]
      <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>
        <span class="ruby-identifier">i</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Integer</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">v</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-keyword kw">nil</span>
      <span class="ruby-keyword kw">end</span>
    }
    <span class="ruby-comment cmt"># verbose_log &quot;with_file(#{name.inspect}, #{args.inspect}) =&gt; #{result.inspect}&quot;; result</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Protected Class methods</h3>

      <div id="method-M000048" class="method-detail">
        <a name="M000048"></a>

        <div class="method-heading">
          <a href="#M000048" class="method-signature">
          <span class="method-name">filename_for_name</span><span class="method-args">(name, dir = config_paths[0], ext = :yml)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Get complete file name, including file path for the given config name and
directory.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000048-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000048-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 790</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">filename_for_name</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">dir</span> = <span class="ruby-identifier">config_paths</span>[<span class="ruby-value">0</span>], <span class="ruby-identifier">ext</span> = <span class="ruby-identifier">:yml</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-node">&quot;#{name}.#{ext}&quot;</span>)
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000046" class="method-detail">
        <a name="M000046"></a>

        <div class="method-heading">
          <a href="#M000046" class="method-signature">
          <span class="method-name">fire_on_load</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Executes all of the <a href="RConfig.html#M000037">reload</a> callbacks
registered to the specified config name, and all of the callbacks
registered to run on any config, as specified by the :ANY symbol.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000046-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000046-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 764</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fire_on_load</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">callbacks</span> =
      (<span class="ruby-ivar">@@on_load</span>[<span class="ruby-value str">'ANY'</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">EMPTY_ARRAY</span>) <span class="ruby-operator">+</span>
      (<span class="ruby-ivar">@@on_load</span>[<span class="ruby-identifier">name</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">EMPTY_ARRAY</span>)
    <span class="ruby-identifier">callbacks</span>.<span class="ruby-identifier">uniq!</span>
    <span class="ruby-identifier">verbose_log</span> <span class="ruby-node">&quot;fire_on_load(#{name.inspect}): callbacks[#{callbacks.inspect}]&quot;</span>  <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">callbacks</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">callbacks</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">cb</span><span class="ruby-operator">|</span> <span class="ruby-identifier">cb</span>.<span class="ruby-identifier">call</span>()}
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000047" class="method-detail">
        <a name="M000047"></a>

        <div class="method-heading">
          <a href="#M000047" class="method-signature">
          <span class="method-name">flush_cache</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Flushes cached config data. This should avoided in production environments,
if possible.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000047-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000047-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 777</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">flush_cache</span>
    <span class="ruby-ivar">@@suffixes</span> = { }
    <span class="ruby-ivar">@@cache</span> = { } 
    <span class="ruby-ivar">@@cache_files</span> = { } 
    <span class="ruby-ivar">@@cache_hash</span> = { }
    <span class="ruby-ivar">@@last_auto_check</span> = { }
    <span class="ruby-keyword kw">self</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000049" class="method-detail">
        <a name="M000049"></a>

        <div class="method-heading">
          <a href="#M000049" class="method-signature">
          <span class="method-name">verbose_log</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Helper method for logging verbose messages.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000049-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000049-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 797</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">verbose_log</span> <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>
    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@@verbose</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000042" class="method-detail">
        <a name="M000042"></a>

        <div class="method-heading">
          <a href="#M000042" class="method-signature">
          <span class="method-name">[]</span><span class="method-args">(key)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creating an instance isn&#8216;t required. But if you just have to a
reference to <a href="RConfig.html">RConfig</a> you can get it using
RConfig.instance. It&#8216;s a singleton, so there&#8216;s never more than
one. The instance has no state, and no methods of it&#8216;s own accept
what it inherits from object. But this method delegates back to the class,
so configuration data is still accessible.
</p>
<p>
Example:
</p>
<pre>
  config = RConfig.instance
  config[:foo] =&gt; RConfig[:foo]
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000042-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000042-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 727</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">key</span>)
    <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>[<span class="ruby-identifier">key</span>]
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000041" class="method-detail">
        <a name="M000041"></a>

        <div class="method-heading">
          <a href="#M000041" class="method-signature">
          <span class="method-name">method_missing</span><span class="method-args">(method, *args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creating an instance isn&#8216;t required. But if you just have to a
reference to <a href="RConfig.html">RConfig</a> you can get it using
RConfig.instance. It&#8216;s a singleton, so there&#8216;s never more than
one. The instance has no state, and no methods of it&#8216;s own accept
what it inherits from object. But this method delegates back to the class,
so configuration data is still accessible.
</p>
<p>
Example:
</p>
<pre>
  config = RConfig.instance
  config.provider(:foo) =&gt; RConfig.provider(:foo)
  config.provider.foo   =&gt; RConfig.provider.foo
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000041-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000041-source">
<pre>
<span class="ruby-comment cmt"># File lib/rconfig/rconfig.rb, line 710</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
    <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>
